# ESG 보고서 PDF 처리 기능 PRD

## 문제 정의

ESG 보고서는 대부분 PDF 형식으로 제공되며, 문서 내에 서술형 본문 텍스트와 표 데이터가 혼합되어 존재한다.  
이로 인해 ESG 정보를 데이터로 가공하기 어려워 분석 및 재사용에 제약이 따른다.  
특히 표는 형식이 일정하지 않고, 텍스트는 분량이 많아 수작업 요약과 정규화가 비효율적이다.

## 목표

- 사용자가 업로드한 ESG 보고서 PDF 파일로부터 본문 텍스트와 표 데이터를 자동 분리하여 추출한다.
- 본문 텍스트는 AI 요약 기능을 통해 핵심 내용을 요약한다.
- 표 데이터는 사전 정의된 구조(JSON 형태)로 재구성한다.
- 사용자에게 웹 UI에서 결과를 시각적으로 제공하고, 복사 및 다운로드 기능을 제공한다.

## 사용자 시나리오

1. 사용자가 ESG PDF 파일을 업로드한다.
2. 서버는 해당 PDF를 분석하여 텍스트와 표를 자동으로 구분해 추출한다.
3. 텍스트는 AI 요약 알고리즘 또는 API를 통해 요약된다.
4. 표는 항목-단위-값 형태의 JSON 포맷으로 변환된다.
5. 사용자에게 요약된 텍스트와 구조화된 표가 웹 화면에 출력된다.
6. 사용자는 결과를 복사하거나 `.json`, `.csv`로 다운로드할 수 있다.

## 기능 명세

- ✅ PDF 업로드 기능
- ✅ 텍스트와 표 자동 분리 추출
- ✅ 텍스트 요약 기능 (OpenRouter API 또는 요약 알고리즘)
- ✅ 표 구조화 변환 기능 (항목/단위/값 포맷)
- ✅ 결과 시각화 (Next.js 기반 UI)
- ✅ 복사 및 다운로드 버튼

## 기술 요구사항

- PDF 처리: Python (`pdfplumber`, `PyMuPDF`, `pandas`)
- 요약 처리: OpenRouter API (`claude-3-opus`, `gpt-3.5-turbo`) 또는 TextRank
- 프론트엔드: Next.js 15 + TailwindCSS + Zustand
- 백엔드 API: Supabase Edge Functions 또는 Vercel Serverless Functions
- 파일 저장: Supabase Storage
- 데이터 포맷: 구조화된 JSON (예: `[{"항목": "...", "단위": "...", "값": "..."}]`)

## 비기능 요구사항

- 파일 크기 제한: 최대 20MB PDF 파일 처리
- 처리 속도: 평균 20초 내 결과 제공
- 반응형 UI: 데스크탑/모바일 지원
- 보안: 업로드된 PDF는 처리 후 즉시 삭제
- 예외처리: 텍스트 또는 표가 존재하지 않을 경우 사용자에게 메시지 출력

## 예상 스택 및 비용

- Supabase (Free Tier): 파일 저장 + 함수 실행 + Postgres DB 사용 가능
- Vercel (Free Tier): 프론트 및 API 배포
- Python 로컬 서버 or Replit로 PDF 분석 처리
- OpenRouter API: 요약 기능 최소 단가 사용, Claude는 요금 있음, GPT-3.5는 무료 또는 저렴
- 전체 월간 비용: 0 ~ 10달러 이내로 운영 가능

## 산출물

- 요약된 ESG 보고서 본문 (텍스트 블록)
- 재구성된 표 데이터 (JSON 형태)
- 복사 및 다운로드 가능한 UI 제공
